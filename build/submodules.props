<Project>
  <ItemDefinitionGroup>
    <Repository>
      <Build>true</Build>

      <!--
        Specifies the ruleset used to determine if a repo should build in a patch update, or not.
        The default is ProductChangesOnly.

        Rulesets:
          ProductChangeOnly
            Only produce new package versions if there were changes to product code.
            Examples: this is the default. Most repos should use this policy.

          CascadeVersion
            Produce new package versions if there were changes to product code, or if one of the package dependencies has updated.
            Examples: metapackages which are not top-level, but should still be used to help users get the latest transitive set of dependencies

          AlwaysUpdate
            Packages should update in every patch.
            Examples: top-level metapackages and templates.

       -->
      <PatchPolicy>ProductChangesOnly</PatchPolicy>
      <RootPath></RootPath>
    </Repository>
    <ShippedRepository>
      <Build>false</Build>
      <PatchPolicy>ProductChangesOnly</PatchPolicy>
      <RootPath></RootPath>
    </ShippedRepository>
  </ItemDefinitionGroup>

  <PropertyGroup>
    <TestsRequiredTheSharedRuntime Condition="'$(RepositoryToBuild)' == 'Templating'">true</TestsRequiredTheSharedRuntime>
  </PropertyGroup>

  <ItemGroup>
    <!-- Test-only repos -->
    <Repository Include="AuthSamples" PatchPolicy="AlwaysUpdateAndCascadeVersions" />
    <Repository Include="MusicStore" PatchPolicy="AlwaysUpdateAndCascadeVersions" />
    <Repository Include="ServerTests" PatchPolicy="AlwaysUpdateAndCascadeVersions" />
  </ItemGroup>

  <ItemGroup>
    <ShippedRepository Include="AADIntegration" />
    <ShippedRepository Include="Antiforgery" />
    <ShippedRepository Include="AzureIntegration" />
    <ShippedRepository Include="BasicMiddleware" />
    <ShippedRepository Include="BrowserLink" />
    <ShippedRepository Include="CORS" />
    <ShippedRepository Include="DataProtection" RootPath="$(RepositoryRoot)src\DataProtection\" />
    <ShippedRepository Include="Diagnostics" />
    <ShippedRepository Include="DotNetTools" />
    <ShippedRepository Include="EntityFrameworkCore" />
    <ShippedRepository Include="Hosting" />
    <ShippedRepository Include="HtmlAbstractions" />
    <ShippedRepository Include="HttpAbstractions" />
    <ShippedRepository Include="HttpClientFactory" />
    <ShippedRepository Include="HttpSysServer" />
    <ShippedRepository Include="Identity" />
    <ShippedRepository Include="IISIntegration" RootPath="$(RepositoryRoot)src\IISIntegration\" />
    <ShippedRepository Include="JavaScriptServices" />
    <ShippedRepository Include="JsonPatch" />
    <ShippedRepository Include="KestrelHttpServer" />
    <ShippedRepository Include="Localization" />
    <ShippedRepository Include="MetaPackages" PatchPolicy="CascadeVersions" />
    <ShippedRepository Include="Mvc" />
    <ShippedRepository Include="MvcPrecompilation" />
    <ShippedRepository Include="Razor" />
    <ShippedRepository Include="ResponseCaching" />
    <ShippedRepository Include="Routing" />
    <ShippedRepository Include="Scaffolding" PatchPolicy="AlwaysUpdate" />
    <ShippedRepository Include="Security" />
    <ShippedRepository Include="Session" />
    <ShippedRepository Include="SignalR" />
    <ShippedRepository Include="StaticFiles" />
    <ShippedRepository Include="Templating" PatchPolicy="AlwaysUpdateAndCascadeVersions" />
    <ShippedRepository Include="WebSockets" RootPath="$(RepositoryRoot)src\WebSockets\" />
  </ItemGroup>
</Project>
